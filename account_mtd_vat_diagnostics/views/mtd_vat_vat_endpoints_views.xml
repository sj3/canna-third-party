<?xml version="1.0" encoding="utf-8"?>
<openerp>
  <data>

    <record id="mtd_vat_endpoints_view" model="ir.ui.view">
      <field name="name">mtd_vat.vat_endpoints.form</field>
      <field name="model">mtd_vat.vat_endpoints</field>
      <field name="inherit_id" ref="account_mtd_vat.mtd_vat_endpoints_view"/>
      <field name="arch" type="xml">
        <field name="date_from" position="before">
          <field name="offline_calc" attrs="{'invisible': [('name', '!=', 'Submit a VAT Return')]}"/>
        </field>
        <field name="date_from" position="attributes">
          <attribute name="attrs">
            {'invisible': [('name', '=', 'View VAT Returns')],
             'required': [('offline_calc', '=', True)],
             'readonly': [('offline_calc', '=', False)]}
          </attribute>
        </field>
        <field name="date_to" position="attributes">
          <attribute name="attrs">
            {'invisible': [('name', '=', 'View VAT Returns')],
             'required': [('offline_calc', '=', True)],
             'readonly': [('offline_calc', '=', False)]}
          </attribute>
        </field>
        <field name="previous_period" position="attributes">
          <attribute name="attrs">
            {'invisible': ['|', ('name', '!=', 'Submit a VAT Return'), ('offline_calc', '=', True)]}
          </attribute>
        </field>
        <button name="action_retrieve_vat" position="attributes">
          <attribute name="attrs">
            {'invisible': ['|', ('name', '!=', 'Submit a VAT Return'), ('offline_calc', '=', True)]}
          </attribute>
        </button>
        <button name="action_retrieve_vat" position="before">
          <button name="action_calc_offline"
                  type="object"
                  string="Calculate VAT Offline"
                  class="oe_highlight"
                  attrs="{'invisible': [('offline_calc', '=', False)]}"/>
        </button>

        <!-- make calculated field editable -->
        <field name="vat_due_sales_submit" position="attributes">
          <attribute name="readonly">0</attribute>
        </field>
        <field name="vat_due_acquisitions_submit" position="attributes">
          <attribute name="readonly">0</attribute>
        </field>
        <field name="total_vat_due_submit" position="attributes">
          <attribute name="readonly">0</attribute>
        </field>
        <field name="vat_reclaimed_submit" position="attributes">
          <attribute name="readonly">0</attribute>
        </field>
        <field name="net_vat_due_submit" position="attributes">
          <attribute name="readonly">0</attribute>
        </field>
        <field name="total_value_sales_submit" position="attributes">
          <attribute name="readonly">0</attribute>
        </field>
        <field name="total_value_purchase_submit" position="attributes">
          <attribute name="readonly">0</attribute>
        </field>
        <field name="total_value_goods_supplied_submit" position="attributes">
          <attribute name="readonly">0</attribute>
        </field>
        <field name="total_acquisitions_submit" position="attributes">
          <attribute name="readonly">0</attribute>
        </field>

      </field>
    </record>

  </data>
</openerp>
